# sudoku 数独解题

毫秒级的数独解题，还能显示每一步的推断。

这个项目的重点是延时数独解题方法。

## 如何使用 ##

试试：

    $ go get github.com/LauTrond/sudoku
    $ echo "
       7
    1
       43 2
            6
       5 9
          418
        81
      2    5
     4    3
    " | go run github.com/LauTrond/sudoku
    
    ====================================
    <0> start
                | 7          |            
     1          |            |            
                | 4   3      | 2          
    ------------------------------------
                |            |         6  
                | 5       9  |            
                |            | 4   1   8  
    ------------------------------------
                |     8   1  |            
             2  |            |     5      
         4      |            | 3          
    ====================================
    <1> 该行唯一可以填入 1 的单元格
                | 7          |            
     1          |            |            
                | 4   3      | 2      [1] 
    ------------------------------------
                |            |         6  
                | 5       9  |            
                |            | 4   1   8  
    ------------------------------------
                |     8   1  |            
             2  |            |     5      
         4      |            | 3          
    ====================================
    <2> 该行唯一可以填入 1 的单元格
                | 7          |            
     1          |            |            
                | 4   3      | 2       1  
    ------------------------------------
                |            |         6  
                | 5       9  |            
                |            | 4   1   8  
    ------------------------------------
                |     8   1  |            
             2  |            |     5      
         4  [1] |            | 3          

    ....
    
    找到了 1 个解
    ====================================
    result 0
     2   6   4  | 7   1   5  | 8   3   9  
     1   3   7  | 8   9   2  | 6   4   5  
     5   9   8  | 4   3   6  | 2   7   1  
    ------------------------------------
     4   2   3  | 1   7   8  | 5   9   6  
     8   1   6  | 5   4   9  | 7   2   3  
     7   5   9  | 6   2   3  | 4   1   8  
    ------------------------------------
     3   7   5  | 2   8   1  | 9   6   4  
     9   8   2  | 3   6   4  | 1   5   7  
     6   4   1  | 9   5   7  | 3   8   2  

谜题写在txt文件中，可以作为参数来运行：

    $ cd $GOPATH/src/github.com/LauTrond/sudoku
    $ go run . puzzles/simple-01.txt

使用 -h 参数显示命令选项：

    $ cd $GOPATH/src/github.com/LauTrond/sudoku
    $ go run . -h

使用 -b 参数可以显示运算耗时。
一般难度谜题，如17线索的 puzzles/simple-1.txt 可以在1毫秒内完成。
puzzles/hard-02.txt 是Google找到的号称"最难的数独"，本项目找到解的耗时约15毫秒：

    $ cd $GOPATH/src/github.com/LauTrond/sudoku
    $ cat puzzles/hard-02.txt
    8........
    ..36.....
    .7..9.2..
    .5...7...
    ....457..
    ...1...3.
    ..1....68
    ..85...1.
    .9....4..
    
    $ go run . -b puzzles/hard-02.txt
      
    找到了 1 个解
    ====================================
    result 0
     8   1   2  | 7   5   3  | 6   4   9  
     9   4   3  | 6   8   2  | 1   7   5  
     6   7   5  | 4   9   1  | 2   8   3  
    ------------------------------------
     1   5   4  | 2   3   7  | 8   9   6  
     3   6   9  | 8   4   5  | 7   2   1  
     2   8   7  | 1   6   9  | 5   3   4  
    ------------------------------------
     5   2   1  | 9   7   4  | 3   6   8  
     4   3   8  | 5   2   6  | 9   1   7  
     7   9   6  | 3   1   8  | 4   5   2  
      
    总耗时：14.754218ms

## 如何做到 ##

两点：

- 尽量加强逻辑推理，填充确定的单元格。
- 遇到无确定单元格的局面，选定一个单元格，对所有可能的填充数产生分支，排除矛盾的局面。

### 推理 ###

概念：

- 互斥组：一行、一列或一宫（3*3）内一个数字不能出现超过一次，所以称为一个互斥组。

符号：

- c : 单元格
- n : 数字
- B : 互斥组

本项目使用下面这些推理：

- 推理1：如果 c 填充 n ，那么 c 排除除 n 外的所有数字。
- 推理2：如果 c 排除除 n 外的所有数字，那么单元格 c 填充数字 n。
- 推理3：如果 c 填充 n ，那么 c 所在的互斥组内除 c 的单元格排除 n。
- 推理4：如果 c 所在的某个互斥组除 c 的单元格排除 n，那么单元格 c 填充 n。
- 推理5：设单元格集合 C 是两个互斥组 B1 和 B2 的交集，如果 B1-C 内全部单元格排除 n ，那么 B2-C 内全部单元格排除 n。

显然，推理1和推理2互为逆命题。推理5在程序中称为"复杂排除法"，源代码中包含一个例子。

### 递归 ###

遇到无确定单元格的局面，挑选一个单元格，枚举每一个可能的填充数，并继续执行推理演算。